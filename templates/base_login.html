<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}My Website{% endblock %}</title>
  <link
    rel="icon"
    href="static/logo_2.webp"
    type="image/webp"
    sizes="100x100"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Dark/Light Mode CSS -->
  <style>
    /* ========== Design Tokens (match base.html) ========== */
    :root {
      --bg-page: #f8f9fa;
      --bg-surface: #ffffff;
      --text-primary: #111827;
      --text-secondary: #6b7280;
      --border-color: #e5e7eb;
      --accent: #2563eb;
      --btn-radius: 0.5rem;
      --btn-primary-bg: #111827;
      --btn-primary-hover: #0f172a;
      --btn-secondary-bg: #f9fafb;
      --btn-secondary-hover: #f3f4f6;
      --btn-outline-border: #d1d5db;
      --btn-danger-bg: #dc2626;
      --btn-danger-hover: #b91c1c;
    }
    .dark-mode {
      --bg-page: #121212;
      --bg-surface: #111827;
      --text-primary: #e5e7eb;
      --text-secondary: #9ca3af;
      --border-color: #374151;
      --btn-primary-bg: #444444;
      --btn-primary-hover: #333333;
      --btn-secondary-bg: #1f2937;
      --btn-secondary-hover: #374151;
      --btn-outline-border: #4b5563;
    }
    /* ========== BASE STYLES (LIGHT MODE) ========== */
    body { background-color: var(--bg-page); color: #212529; }

    .navbar {
      transition: background-color 0.3s ease;
    }

    /* ========== DARK MODE STYLES ========== */
    .dark-mode { background-color: var(--bg-page) !important; color: #ffffff !important; }

    .dark-mode .navbar {
      background-color: #212529 !important;
    }
    .dark-mode .nav-link {
      color: #ffffff !important;
    }
    .dark-mode .nav-link.active {
      background-color: #333333 !important;
      border-radius: 5px;
    }

    /* List group items in dark mode */
    .dark-mode .list-group-item {
      background-color: #1e1e1e;
      color: #ffffff;
      border-color: #333333;
    }
    .dark-mode .list-group-item:hover {
      background-color: #2c2c2c;
    }

    /* Buttons in dark mode */
    .dark-mode .btn-primary {
      background-color: #3f51b5;
      border-color: #3f51b5;
    }
    .dark-mode .btn-primary:hover {
      background-color: #303f9f;
      border-color: #303f9f;
    }

    /*
      IFRAME Dark Mode Trick:
      Invert colors + hue-rotate to simulate "dark theme".
      If you prefer slightly brighter or darker, tweak invert() or reduce hue-rotate().
    */
    .dark-mode .iframe-container iframe {
      filter: invert(0.9) hue-rotate(180deg);
    }

    /*
      Make the container behind the sheet a little lighter in dark mode
      so the embedded sheet stands out.
    */
    .dark-mode .iframe-container {
      background-color: #2a2a2a; /* Lighter than #1e1e1e */
    }

    /* ========== Cards + Buttons (Global) ========== */
    .surface-card { background: var(--bg-surface); box-shadow: 0 1px 2px rgba(16,24,40,.06), 0 1px 3px rgba(16,24,40,.10); }
    .ring-muted   { box-shadow: 0 0 0 1px var(--border-color) inset; }

    .th-btn {
      display: inline-flex; align-items: center; justify-content: center;
      border-radius: var(--btn-radius); font-weight: 600; font-size: .875rem;
      padding: .375rem .875rem; line-height: 1.25rem; gap: .5rem;
      border: 1px solid transparent; transition: background-color .2s, color .2s, border-color .2s, box-shadow .2s;
      text-decoration: none;
    }
    .th-btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }
    .th-btn-primary { background: var(--btn-primary-bg); color: #fff; }
    .th-btn-primary:hover { background: var(--btn-primary-hover); }
    .th-btn-danger { background: var(--btn-danger-bg); color: #fff; }
    .th-btn-danger:hover { background: var(--btn-danger-hover); }

    /* ========== TOGGLE SWITCH ========== */
    .switch {
      position: relative;
      display: inline-block;
      width: 46px;
      height: 24px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 24px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #66bb6a;
    }
    input:checked + .slider:before {
      transform: translateX(22px);
    }
    .slider.round {
      border-radius: 24px;
    }
    .slider.round:before {
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand d-flex align-items-center" href="/">
        <img src="/static/logo.png" alt="Logo" height="40px" class="me-2" />
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          
        </ul>

        {% if session['username'] %}
        <div class="ms-auto d-flex align-items-center">
          <!-- Modern toggle switch to the left of “Hello, user” -->
          <label class="switch me-3">
            <input type="checkbox" id="darkModeToggle" />
            <span class="slider round"></span>
          </label>

          <span class="text-white me-3">Hello, {{ session['username'] }}</span>
          <a href="{{ url_for('logout') }}" class="th-btn th-btn-danger">Logout</a>
        </div>
        {% endif %}
      </div>
    </div>
  </nav>

  <div class="container mt-5">
    {% block content %}{% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://apis.google.com/js/api.js"></script>

  <!-- Dark Mode Toggle Script -->
  <script>
    const darkModeToggle = document.getElementById("darkModeToggle");
  
    // 1. On page load, check localStorage for "darkModeEnabled"
    window.addEventListener('DOMContentLoaded', () => {
      const isDark = localStorage.getItem('darkModeEnabled') === 'true';
      // If `isDark` is true, apply the .dark-mode class to <body> and check the toggle
      document.body.classList.toggle('dark-mode', isDark);
      darkModeToggle.checked = isDark;
    });
  
    // 2. When the user toggles the switch, update <body> class and localStorage
    darkModeToggle.addEventListener("change", function () {
      document.body.classList.toggle("dark-mode", this.checked);
      // Save the state in localStorage
      localStorage.setItem('darkModeEnabled', this.checked);
    });
  </script>
  
</body>
</html>
